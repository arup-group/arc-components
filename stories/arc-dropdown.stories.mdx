import { Meta, Story, Canvas, ArgsTable } from '@web/storybook-prebuilt/addon-docs/blocks.js';
import * as stories from '../out-tsc/components/dropdown/arc-dropdown.stories.js';
import { DROPDOWN_PLACEMENTS } from '../out-tsc/components/dropdown/constants/DropdownConstants.js';

<Meta
title='ArcDropdown'
component='arc-dropdown'
argTypes={{
    placement: {
      description: 'The preferred placement of the dropdown panel. Note that the actual placement may vary as needed to keep the panel inside of the viewport.',
      defaultValue: { summary: DROPDOWN_PLACEMENTS.bottomStart },
      control: { type: 'select' },
      options: Object.values(DROPDOWN_PLACEMENTS),
    },
    distance: {
      description: 'The distance in pixels from which to offset the panel away from its trigger.',
      defaultValue: { summary: '0' },
      control: { type: 'number' },
    },
    skidding: {
        description: 'The distance in pixels from which to offset the panel along its trigger.',
        defaultValue: { summary: '0' },
        control: { type: 'number' },
    },
    open: {
        description: 'Indicates whether or not the dropdown is open.',
        defaultValue: { summary: 'false' },
        control: { type: 'boolean' },
    },
    disabled: {
        description: 'Disables the dropdown so the panel will not open.',
        defaultValue: { summary: 'false' },
        control: { type: 'boolean' },
    },
    hoist: {
        description: 'Enable this option to prevent the panel from being clipped when the component is placed inside a container with overflow: auto|scroll.',
        defaultValue: { summary: 'false' },
        control: { type: 'boolean' },
    },
}}
parameters={{
    actions: {
      handles: ['arc-show', 'arc-after-show', 'arc-hide', 'arc-after-hide', 'arc-select'],
    },
}} />

# Dropdown
### `<arc-dropdown>`

The Dropdown is used to expose additional content that 'drops down' in a panel.
Dropdowns consist of a trigger and a panel. By default, activating the trigger will expose the panel and interacting outside of the panel will close it.

Dropdowns are designed to work well with [arc-menu](?path=/story/arcmenu--default) to provide a list of options to the user.
The API gives you complete control over showing, hiding and positioning the panel.

<Canvas>
  <Story name="Default" story={stories.Default} />
</Canvas>

## Examples
### Getting the selected item
When dropdowns are used with [arc-menu](?path=/story/arcmenu--default), you can listen for the arc-select event to determine which menu item was selected.
The menu item element will be exposed in event.detail.item. You can set value props to make it easier to identify commands.

```bash
<div class="dropdown-selection">
  <arc-dropdown>
    <arc-button slot="trigger">Edit</arc-button>
    <arc-menu>
      <arc-menu-item value="cut">Cut</arc-menu-item>
      <arc-menu-item value="copy">Copy</arc-menu-item>
      <arc-menu-item value="paste">Paste</arc-menu-item>
    </arc-menu>
  </arc-dropdown>
</div>

<script>
  const container = document.querySelector('.dropdown-selection');
  const dropdown = container.querySelector('arc-dropdown');

  dropdown.addEventListener('arc-select', event => {
    const selectedItem = event.detail.item;
    console.log(selectedItem.value);
  });
</script>
```

### Placement
The preferred placement of the dropdown can be set with the placement attribute.
Note that the actual position may vary to ensure the panel remains in the viewport.
<Canvas>
  <Story name="Position" story={stories.Position} />
</Canvas>

### Distance
The distance from the panel to the trigger can be customized using the distance attribute.
This value is specified in pixels.
<Canvas>
  <Story name="Distance" story={stories.Distance} />
</Canvas>

### Skidding
The offset of the panel along the trigger can be customized using the skidding attribute.
This value is specified in pixels.
<Canvas>
  <Story name="Skidding" story={stories.Skidding} />
</Canvas>

### States
Use the `hoist` attribute to change the strategy of the dropdown.
Dropdown panels will be clipped if they're inside a container that has overflow: auto|hidden.
The hoist attribute forces the panel to use a fixed positioning strategy, allowing it to break out of the container.
In this case, the panel will be positioned relative to its containing block,
which is usually the viewport unless an ancestor uses a transform, perspective, or filter.

## Properties
<ArgsTable story='Default' />

## Events

| Name           | Description                                                       |
|----------------|-------------------------------------------------------------------|
| arc-show       | Emitted when the sidebar opens.                                   |
| arc-after-show | Emitted after the dropdown opens and all animations are complete. |
| arc-hide       | Emitted when the sidebar closes.                                  |
| arc-after-hide | Emitted after the dropdown closes and all animations are complete.|

## Methods

| Name         | Description                                               |
|--------------|-----------------------------------------------------------|
| show         | Shows the dropdown panel.                                 |
| hide         | Hides the dropdown panel.                                 |

## Slots

| Name         | Description                                               |
|--------------|-----------------------------------------------------------|
| (default)    | The dropdown content.                                     |
| slotName     | The dropdown trigger, usually an `<arc-button>` element.  |
